(this["webpackJsonprock-paper-scissors"]=this["webpackJsonprock-paper-scissors"]||[]).push([[0],{130:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(60),r=n.n(s),o=(n(70),n(8)),c=n(18),d=n(2),p=n(12),u=n(13),l=n(15),m=n(14),h=n(1),g=n(28).socket,j=function(e){return function(e,t,n){var i={gameId:e,userName:t,isHost:n};g.emit("playerJoinGame",i)}(Object(d.g)().gameid,e.userName,e.isHost),Object(h.jsx)("div",{children:Object(h.jsx)("h1",{style:{textAlign:"center"},children:"Rock, paper, scissors"})})},x=n(28).socket,b=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT||8e3,O=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).URL||"localhost:".concat(b),S=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={host:e.props.isHost,choiceHost:-1,choiceGuest:-1,scoreHost:0,scoreGuest:0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){console.log("props:",this.props),console.log(this.state)}},{key:"choose",value:function(e,t){e?this.choiceHost=t:this.choiceGuest=t}},{key:"render",value:function(){return Object(h.jsx)("div",{children:"Such game, much wow."})}}]),n}(a.a.Component),f=function(e){var t=Object(d.g)().gameid,n=a.a.useState(""),i=Object(o.a)(n,2),s=(i[0],i[1]),r=a.a.useState(!1),c=Object(o.a)(r,2),p=c[0],u=c[1],l=a.a.useState(""),m=Object(o.a)(l,2),g=m[0],j=m[1],b=a.a.useState(!1),f=Object(o.a)(b,2),w=f[0],y=f[1];return a.a.useEffect((function(){x.on("playerJoinedRoom",(function(e){console.log("A new player has joined the room! Username: "+e.userName+", Game id: "+e.gameId+" Socket id: "+e.mySocketId),x.id!==e.mySocketId&&s(e.mySocketId)})),x.on("status",(function(e){console.log(e),alert(e),"This game session does not exist."!==e&&"There are already 2 people playing in this room."!==e||y(!0)})),x.on("start game",(function(n){console.log("START!"),n!==e.myUserName?(j(n),u(!0)):x.emit("request username",t)})),x.on("give userName",(function(n){x.id!==n&&(console.log("give userName stage: "+e.myUserName),x.emit("recieved userName",{userName:e.myUserName,gameId:t}))})),x.on("get Opponent UserName",(function(e){x.id!==e.socketId&&(j(e.userName),console.log("data.socketId: data.socketId"),s(e.socketId),u(!0))}))}),[]),Object(h.jsx)(a.a.Fragment,{children:p?Object(h.jsxs)("div",{children:[Object(h.jsxs)("h4",{children:[" Opponent: ",g," "]}),Object(h.jsx)("div",{style:{display:"flex"},children:Object(h.jsx)(S,{gameId:t})}),Object(h.jsxs)("h4",{children:[" You: ",e.myUserName," "]})]}):w?Object(h.jsx)("div",{children:Object(h.jsx)("h1",{style:{textAlign:"center",marginTop:"200px"},children:" :( "})}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("h1",{style:{textAlign:"center",marginTop:String(window.innerHeight/8)+"px"},children:["Hey ",Object(h.jsx)("strong",{children:e.myUserName}),", copy and paste the URL below to send to your friend:"]}),Object(h.jsx)("textarea",{style:{marginLeft:String(window.innerWidth/2-290)+"px",marginTop:"30px",width:"580px",height:"30px"},onFocus:function(e){e.target.select()},value:O+"/game/"+t,type:"text",readOnly:!0}),Object(h.jsx)("br",{}),Object(h.jsxs)("h1",{style:{textAlign:"center",marginTop:"100px"},children:[" ","Waiting for other opponent to join the game..."," "]})]})})},w=n(25),y=n.n(w),v=new(n(65).a),T=n(51),N=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(e){var i;return Object(p.a)(this,n),(i=t.call(this,e)).state={didGetUserName:!1,username:"",inputEmail:"",inputPassword:"",inputText:""},i.typingEmail=function(){var e=i.email.current.value;i.setState({inputEmail:e})},i.typingPassword=function(){var e=i.password.current.value;i.setState({inputPassword:e})},i.typingUserName=function(){var e=i.textArea.current.value;i.setState({inputText:e})},i.email=a.a.createRef(),i.password=a.a.createRef(),i.textArea=a.a.createRef(),i}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(h.jsx)(a.a.Fragment,{children:this.state.didGetUserName?Object(h.jsxs)(a.a.Fragment,{children:[Object(h.jsx)(j,{userName:this.state.username,isHost:!1}),Object(h.jsx)(f,{myUserName:this.state.username,isHost:!1})]}):Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{style:{textAlign:"center",marginTop:String(window.innerHeight/3)+"px"},children:"Log in:"}),Object(h.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.email,onInput:this.typingEmail}),Object(h.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.password,type:"password",onInput:this.typingPassword}),Object(h.jsx)("button",{className:"btn btn-primary",style:{marginLeft:String(window.innerWidth/2-60)+"px",width:"120px",marginTop:"62px"},disabled:!(this.state.inputEmail.length>0&&this.state.inputPassword.length>0),onClick:function(){console.log("logging in"),T.post("https://game-nexus.herokuapp.com/api/v1/validate/",{email:e.state.inputEmail,passwordHash:y()(e.state.inputPassword)}).then((function(t){console.log("got response:",t),v.set("username",t.data.username.username,{path:"/"}),e.setState({username:t.data.username.username,didGetUserName:!0})})).catch((function(e){alert("Invalid credentials!"),console.log("got error:",e.response)}))},children:"Submit"}),Object(h.jsx)("h1",{style:{textAlign:"center",marginTop:String(window.innerHeight/3)+"px"},children:"Play as guest:"}),Object(h.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.textArea,onInput:this.typingUserName}),Object(h.jsx)("button",{className:"btn btn-primary",style:{marginLeft:String(window.innerWidth/2-60)+"px",width:"120px",marginTop:"62px"},disabled:!(this.state.inputText.length>0),onClick:function(){e.setState({username:e.state.inputText,didGetUserName:!0})},children:"Submit"})]})})}}]),n}(a.a.Component),E=Object(i.createContext)({didRedirect:!1,playerDidRedirect:function(){},playerDidNotRedirect:function(){}}),R=n(35),U=n.n(R),k=n(63),_=n(64),I=n.n(_),P=n(28).socket,C=n(51),H=function(e){Object(l.a)(n,e);var t=Object(m.a)(n);function n(e){var i;return Object(p.a)(this,n),(i=t.call(this,e)).state={didGetUserName:!1,inputEmail:"",inputPassword:"",inputText:"",gameId:""},i.send=function(){var e=I()();return P.emit("createNewGame",e),e},i.typingEmail=function(){var e=i.email.current.value;i.setState({inputEmail:e})},i.typingPassword=function(){var e=i.password.current.value;i.setState({inputPassword:e})},i.typingUserName=function(){var e=i.textArea.current.value;i.setState({inputText:e})},i.email=a.a.createRef(),i.password=a.a.createRef(),i.textArea=a.a.createRef(),i}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return console.log(this.state),Object(h.jsx)(a.a.Fragment,{children:this.state.didGetUserName?Object(h.jsx)(d.a,{to:"/game/"+this.state.gameId}):Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{style:{textAlign:"center",marginTop:String(window.innerHeight/3)+"px"},children:"Log in:"}),Object(h.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.email,onInput:this.typingEmail}),Object(h.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.password,type:"password",onInput:this.typingPassword}),Object(h.jsx)("button",{className:"btn btn-primary",style:{marginLeft:String(window.innerWidth/2-60)+"px",width:"120px",marginTop:"62px"},disabled:!(this.state.inputEmail.length>0&&this.state.inputPassword.length>0),onClick:Object(k.a)(U.a.mark((function t(){var n,i;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("logging in"),t.prev=1,t.next=4,C.post("https://game-nexus.herokuapp.com/api/v1/validate/",{email:e.state.inputEmail,passwordHash:y()(e.state.inputPassword)});case 4:n=t.sent,console.log("got response:",n.data.username.username),v.set("username",n.data.username.username,{path:"/"}),e.props.didRedirect(),e.props.setUserName(n.data.username.username),i=e.send(),e.setState({didGetUserName:!0,gameId:i}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),alert("Invalid credentials!"),console.log("got error:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,13]])}))),children:"Submit"}),Object(h.jsx)("h1",{style:{textAlign:"center",marginTop:String(window.innerHeight/3)+"px"},children:"Play as guest:"}),Object(h.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.textArea,onInput:this.typingUserName}),Object(h.jsx)("button",{className:"btn btn-primary",style:{marginLeft:String(window.innerWidth/2-60)+"px",width:"120px",marginTop:"62px"},disabled:!(this.state.inputText.length>0),onClick:function(){e.props.didRedirect(),e.props.setUserName(e.state.inputText);var t=e.send();e.setState({didGetUserName:!0,gameId:t})},children:"Submit"})]})})}}]),n}(a.a.Component),A=function(e){var t=a.a.useContext(E);return Object(h.jsx)(H,{didRedirect:t.playerDidRedirect,setUserName:e.setUserName})};var L=function(){var e=a.a.useState(!1),t=Object(o.a)(e,2),n=t[0],i=t[1],s=a.a.useCallback((function(){i(!0)}),[]),r=a.a.useCallback((function(){i(!1)}),[]),p=a.a.useState(""),u=Object(o.a)(p,2),l=u[0],m=u[1];return Object(h.jsx)(E.Provider,{value:{didRedirect:n,playerDidRedirect:s,playerDidNotRedirect:r},children:Object(h.jsx)(c.a,{children:Object(h.jsxs)(d.d,{children:[Object(h.jsx)(d.b,{path:"/",exact:!0,children:Object(h.jsx)(A,{setUserName:m})}),Object(h.jsx)(d.b,{path:"/game/:gameid",exact:!0,children:n?Object(h.jsxs)(a.a.Fragment,{children:[Object(h.jsx)(j,{userName:l,isHost:!0}),Object(h.jsx)(f,{myUserName:l,isHost:!0})]}):Object(h.jsx)(N,{})}),Object(h.jsx)(d.a,{to:"/"})]})})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),s(e),r(e)}))};r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(L,{})}),document.getElementById("root")),W()},28:function(e,t,n){"use strict";n.r(t),n.d(t,"socket",(function(){return c})),n.d(t,"mySocketId",(function(){return i}));var i,a=n(61),s=n.n(a),r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT||8e3,o=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).URL||"localhost:".concat(r),c=s()(o);c.on("createNewGame",(function(e){console.log("A new game has been created! Username: "+e.userName+", Game id: "+e.gameId+" Socket id: "+e.mySocketId),i=e.mySocketId}))},70:function(e,t,n){},97:function(e,t){}},[[130,1,2]]]);
//# sourceMappingURL=main.546b5be5.chunk.js.map