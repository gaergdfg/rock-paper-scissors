(this["webpackJsonprock-paper-scissors"]=this["webpackJsonprock-paper-scissors"]||[]).push([[0],{130:function(e,t,s){"use strict";s.r(t);var n=s(0),i=s.n(n),o=s(60),a=s.n(o),r=(s(70),s(8)),c=s(18),d=s(2),h=s(12),l=s(13),u=s(15),p=s(14),m=s(1),g=s(28).socket,j=function(e){return function(e,t,s){var n={gameId:e,userName:t,isHost:s};g.emit("playerJoinGame",n)}(Object(d.g)().gameid,e.userName,e.isHost),Object(m.jsx)("div",{children:Object(m.jsx)("h1",{style:{textAlign:"center"},children:"Rock, paper, scissors"})})},x=s(28).socket,b=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT||8e3,O=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).URL||"localhost:".concat(b),w=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(h.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={host:e.props.isHost,choiceHost:-1,choiceGuest:-1,scoreHost:0,scoreGuest:0,winner:"nobody"},e}return Object(l.a)(s,[{key:"updateGameState",value:function(){this.state.choiceGuest==this.state.choiceHost?this.setState({winner:"draw"}):1==this.state.choiceGuest&&0==this.state.choiceHost||2==this.state.choiceGuest&&1==this.state.choiceHost||0==this.state.choiceGuest&&2==this.state.choiceHost?(this.setState({winner:"Guest"}),this.setState({scoreGuest:this.state.scoreGuest+1})):(0==this.state.choiceGuest&&1==this.state.choiceHost||1==this.state.choiceGuest&&2==this.state.choiceHost||2==this.state.choiceGuest&&0==this.state.choiceHost)&&(this.setState({winner:"Host"}),this.setState({scoreHost:this.state.scoreHost+1}))}},{key:"componentDidMount",value:function(){var e=this;console.log("props:",this.props),console.log(this.state),this.setState({isHost:this.props.isHost}),x.on("hostMove",(function(t){console.log("hostMoveEvent",t),console.log(e.state.isHost),e.state.isHost||e.setState({choiceHost:t}),-1!=e.state.choiceGuest&&-1!=e.state.choiceHost&&(console.log(e.state),e.updateGameState(),alert("winner: "+e.state.winner),5==e.scoreGuest?(console.log("moron"),window.location.href="/guestWin.html"):5==e.scoreHost&&(console.log("moron2"),window.location.href="/hostWin.html"),e.setState({winner:"nobody",choiceGuest:-1,choiceHost:-1}))})),x.on("guestMove",(function(t){console.log("guestMoveEvent",t),console.log(e.state.isHost),e.state.isHost&&e.setState({choiceGuest:t}),-1!=e.state.choiceGuest&&-1!=e.state.choiceHost&&(console.log(e.state),e.state.choiceGuest==e.state.choiceHost&&e.setState({winner:"draw"}),e.updateGameState(),alert("winner: "+e.state.winner),5==e.scoreGuest?(console.log("moron"),window.location.href="/guestWin.html"):5==e.scoreHost&&(console.log("moron2"),window.location.href="/hostWin.html"),e.setState({winner:"nobody",choiceGuest:-1,choiceHost:-1}))}))}},{key:"render",value:function(){return Object(m.jsxs)("div",{class:"box",children:[Object(m.jsx)("div",{class:"row",children:Object(m.jsx)("button",{onClick:this.choose.bind(this,this.state.host,0),children:"rock"})}),Object(m.jsx)("div",{class:"row",children:Object(m.jsx)("button",{onClick:this.choose.bind(this,this.state.host,1),children:"paper"})}),Object(m.jsx)("div",{class:"row",children:Object(m.jsx)("button",{onClick:this.choose.bind(this,this.state.host,2),children:"scissors"})}),"Host:",Object(m.jsx)("div",{children:Object(m.jsx)("output",{children:this.state.choiceHost})}),Object(m.jsx)("div",{children:Object(m.jsx)("output",{children:this.state.scoreHost})}),"Guest:",Object(m.jsx)("div",{children:Object(m.jsx)("output",{children:this.state.choiceGuest})}),Object(m.jsx)("div",{children:Object(m.jsx)("output",{children:this.state.scoreGuest})})]})}},{key:"choose",value:function(e,t){e?(this.setState({choiceHost:t}),x.emit("new host move",{choice:t,gameId:this.props.gameId}),console.log("inH")):(this.setState({choiceGuest:t}),x.emit("new guest move",{choice:t,gameId:this.props.gameId}),console.log("inG"))}}]),s}(i.a.Component),S=function(e){var t=Object(d.g)().gameid,s=i.a.useState(""),n=Object(r.a)(s,2),o=(n[0],n[1]),a=i.a.useState(!1),c=Object(r.a)(a,2),h=c[0],l=c[1],u=i.a.useState(""),p=Object(r.a)(u,2),g=p[0],j=p[1],b=i.a.useState(!1),S=Object(r.a)(b,2),v=S[0],f=S[1];return console.log(e.isHost),i.a.useEffect((function(){x.on("playerJoinedRoom",(function(e){console.log("A new player has joined the room! Username: "+e.userName+", Game id: "+e.gameId+" Socket id: "+e.mySocketId),x.id!==e.mySocketId&&o(e.mySocketId)})),x.on("status",(function(e){console.log(e),alert(e),"This game session does not exist."!==e&&"There are already 2 people playing in this room."!==e||f(!0)})),x.on("start game",(function(s){console.log("START!"),s!==e.myUserName?(j(s),l(!0)):x.emit("request username",t)})),x.on("give userName",(function(s){x.id!==s&&(console.log("give userName stage: "+e.myUserName),x.emit("recieved userName",{userName:e.myUserName,gameId:t}))})),x.on("get Opponent UserName",(function(e){x.id!==e.socketId&&(j(e.userName),console.log("data.socketId: data.socketId"),o(e.socketId),l(!0))}))}),[]),Object(m.jsx)(i.a.Fragment,{children:h?Object(m.jsxs)("div",{children:[Object(m.jsxs)("h4",{children:[" Opponent: ",g," "]}),Object(m.jsx)("div",{style:{display:"flex"},children:Object(m.jsx)(w,{gameId:t,isHost:e.isHost})}),Object(m.jsxs)("h4",{children:[" You: ",e.myUserName," "]})]}):v?Object(m.jsx)("div",{children:Object(m.jsx)("h1",{style:{textAlign:"center",marginTop:"200px"},children:" :( "})}):Object(m.jsxs)("div",{children:[Object(m.jsxs)("h1",{style:{textAlign:"center",marginTop:String(window.innerHeight/8)+"px"},children:["Hey ",Object(m.jsx)("strong",{children:e.myUserName}),", copy and paste the URL below to send to your friend:"]}),Object(m.jsx)("textarea",{style:{marginLeft:String(window.innerWidth/2-290)+"px",marginTop:"30px",width:"580px",height:"30px"},onFocus:function(e){e.target.select()},value:O+"/game/"+t,type:"text",readOnly:!0}),Object(m.jsx)("br",{}),Object(m.jsxs)("h1",{style:{textAlign:"center",marginTop:"100px"},children:[" ","Waiting for other opponent to join the game..."," "]})]})})},v=s(25),f=s.n(v),y=new(s(65).a),T=s(51),H=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(h.a)(this,s),(n=t.call(this,e)).state={didGetUserName:!1,username:"",inputEmail:"",inputPassword:"",inputText:""},n.typingEmail=function(){var e=n.email.current.value;n.setState({inputEmail:e})},n.typingPassword=function(){var e=n.password.current.value;n.setState({inputPassword:e})},n.typingUserName=function(){var e=n.textArea.current.value;n.setState({inputText:e})},n.email=i.a.createRef(),n.password=i.a.createRef(),n.textArea=i.a.createRef(),n}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(m.jsx)(i.a.Fragment,{children:this.state.didGetUserName?Object(m.jsxs)(i.a.Fragment,{children:[Object(m.jsx)(j,{userName:this.state.username,isHost:!1}),Object(m.jsx)(S,{myUserName:this.state.username,isHost:!1})]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{style:{textAlign:"center",marginTop:String(window.innerHeight/3)+"px"},children:"Log in:"}),Object(m.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.email,onInput:this.typingEmail}),Object(m.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.password,type:"password",onInput:this.typingPassword}),Object(m.jsx)("button",{className:"btn btn-primary",style:{marginLeft:String(window.innerWidth/2-60)+"px",width:"120px",marginTop:"62px"},disabled:!(this.state.inputEmail.length>0&&this.state.inputPassword.length>0),onClick:function(){console.log("logging in"),T.post("https://game-nexus.herokuapp.com/api/v1/validate/",{email:e.state.inputEmail,passwordHash:f()(e.state.inputPassword)}).then((function(t){console.log("got response:",t),y.set("username",t.data.username.username,{path:"/"}),e.setState({username:t.data.username.username,didGetUserName:!0})})).catch((function(e){alert("Invalid credentials!"),console.log("got error:",e.response)}))},children:"Submit"}),Object(m.jsx)("h1",{style:{textAlign:"center",marginTop:String(window.innerHeight/3)+"px"},children:"Play as guest:"}),Object(m.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.textArea,onInput:this.typingUserName}),Object(m.jsx)("button",{className:"btn btn-primary",style:{marginLeft:String(window.innerWidth/2-60)+"px",width:"120px",marginTop:"62px"},disabled:!(this.state.inputText.length>0),onClick:function(){e.setState({username:e.state.inputText,didGetUserName:!0})},children:"Submit"})]})})}}]),s}(i.a.Component),N=Object(n.createContext)({didRedirect:!1,playerDidRedirect:function(){},playerDidNotRedirect:function(){}}),E=s(35),k=s.n(E),G=s(63),R=s(64),U=s.n(R),I=s(28).socket,_=s(51),C=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(h.a)(this,s),(n=t.call(this,e)).state={didGetUserName:!1,inputEmail:"",inputPassword:"",inputText:"",gameId:""},n.send=function(){var e=U()();return I.emit("createNewGame",e),e},n.typingEmail=function(){var e=n.email.current.value;n.setState({inputEmail:e})},n.typingPassword=function(){var e=n.password.current.value;n.setState({inputPassword:e})},n.typingUserName=function(){var e=n.textArea.current.value;n.setState({inputText:e})},n.email=i.a.createRef(),n.password=i.a.createRef(),n.textArea=i.a.createRef(),n}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(m.jsx)(i.a.Fragment,{children:this.state.didGetUserName?Object(m.jsx)(d.a,{to:"/game/"+this.state.gameId}):Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{style:{textAlign:"center",marginTop:String(window.innerHeight/3)+"px"},children:"Log in:"}),Object(m.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.email,onInput:this.typingEmail}),Object(m.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.password,type:"password",onInput:this.typingPassword}),Object(m.jsx)("button",{className:"btn btn-primary",style:{marginLeft:String(window.innerWidth/2-60)+"px",width:"120px",marginTop:"62px"},disabled:!(this.state.inputEmail.length>0&&this.state.inputPassword.length>0),onClick:Object(G.a)(k.a.mark((function t(){var s,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("logging in"),t.prev=1,t.next=4,_.post("https://game-nexus.herokuapp.com/api/v1/validate/",{email:e.state.inputEmail,passwordHash:f()(e.state.inputPassword)});case 4:s=t.sent,console.log("got response:",s.data.username.username),y.set("username",s.data.username.username,{path:"/"}),e.props.didRedirect(),e.props.setUserName(s.data.username.username),n=e.send(),e.setState({didGetUserName:!0,gameId:n}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),alert("Invalid credentials!"),console.log("got error:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,13]])}))),children:"Submit"}),Object(m.jsx)("h1",{style:{textAlign:"center",marginTop:String(window.innerHeight/3)+"px"},children:"Play as guest:"}),Object(m.jsx)("input",{style:{marginLeft:String(window.innerWidth/2-120)+"px",width:"240px",marginTop:"62px"},ref:this.textArea,onInput:this.typingUserName}),Object(m.jsx)("button",{className:"btn btn-primary",style:{marginLeft:String(window.innerWidth/2-60)+"px",width:"120px",marginTop:"62px"},disabled:!(this.state.inputText.length>0),onClick:function(){e.props.didRedirect(),e.props.setUserName(e.state.inputText);var t=e.send();e.setState({didGetUserName:!0,gameId:t})},children:"Submit"})]})})}}]),s}(i.a.Component),P=function(e){var t=i.a.useContext(N);return Object(m.jsx)(C,{didRedirect:t.playerDidRedirect,setUserName:e.setUserName})};var W=function(){var e=i.a.useState(!1),t=Object(r.a)(e,2),s=t[0],n=t[1],o=i.a.useCallback((function(){n(!0)}),[]),a=i.a.useCallback((function(){n(!1)}),[]),h=i.a.useState(""),l=Object(r.a)(h,2),u=l[0],p=l[1];return Object(m.jsx)(N.Provider,{value:{didRedirect:s,playerDidRedirect:o,playerDidNotRedirect:a},children:Object(m.jsx)(c.a,{children:Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{path:"/",exact:!0,children:Object(m.jsx)(P,{setUserName:p})}),Object(m.jsx)(d.b,{path:"/game/:gameid",exact:!0,children:s?Object(m.jsxs)(i.a.Fragment,{children:[Object(m.jsx)(j,{userName:u,isHost:!0}),Object(m.jsx)(S,{myUserName:u,isHost:!0})]}):Object(m.jsx)(H,{})}),Object(m.jsx)(d.a,{to:"/"})]})})})},A=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,131)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;s(e),n(e),i(e),o(e),a(e)}))};a.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(W,{})}),document.getElementById("root")),A()},28:function(e,t,s){"use strict";s.r(t),s.d(t,"socket",(function(){return c})),s.d(t,"mySocketId",(function(){return n}));var n,i=s(61),o=s.n(i),a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT||8e3,r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).URL||"localhost:".concat(a),c=o()(r);c.on("createNewGame",(function(e){console.log("A new game has been created! Username: "+e.userName+", Game id: "+e.gameId+" Socket id: "+e.mySocketId),n=e.mySocketId}))},70:function(e,t,s){},97:function(e,t){}},[[130,1,2]]]);
//# sourceMappingURL=main.1c7487c0.chunk.js.map